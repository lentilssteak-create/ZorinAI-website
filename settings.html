<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZorinAI | Settings</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore-compat.js"></script>
    <style>
        :root { --zorin-blue: #0078ff; --zorin-dark: #0a0e14; --card-bg: #161c24; --input-bg: #1c252e; --text: #ffffff; --danger: #ef4444; }
        body { margin: 0; background-color: var(--zorin-dark); color: var(--text); font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .app-card { background: var(--card-bg); width: 100%; max-width: 440px; padding: 35px; border-radius: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: var(--input-bg); color: white; margin-bottom: 10px; }
        .btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; margin-bottom: 10px; }
        .blue { background: var(--zorin-blue); color: white; }
        .red { background: var(--danger); color: white; }
        h4 { text-align: left; margin: 15px 0 5px 0; font-size: 12px; color: #a0a6b1; }
    </style>
</head>
<body>
    <div class="app-card">
        <h2>Settings</h2>
        
        <h4>UPDATE SPARX CREDENTIALS</h4>
        <input type="email" id="new-sparx-email" placeholder="New Sparx Email">
        <input type="password" id="new-sparx-pass" placeholder="New Sparx Password">
        <button class="btn blue" onclick="updateSparx()">Update Sparx Account</button>

        <hr style="opacity:0.1; margin: 20px 0;">

        <h4>DASHBOARD SECURITY</h4>
        <input type="password" id="new-dash-pass" placeholder="New Dashboard Password">
        <button class="btn blue" onclick="updatePass()">Change Password</button>
        <button class="btn red" onclick="deleteAccount()">Delete Account Forever</button>

        <a href="index.html" style="color:#a0a6b1; font-size: 13px;">‚Üê Back to Dashboard</a>
    </div>

<script>
const firebaseConfig = { /* PASTE YOUR CONFIG HERE */ };
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

async function updateSparx() {
    const e = document.getElementById('new-sparx-email').value;
    const p = document.getElementById('new-sparx-pass').value;
    if(!e || !p) return alert("Fill fields");
    await db.collection('users').doc(auth.currentUser.uid).update({ sparxEmail: e, sparxPass: p });
    alert("Sparx Credentials Updated!");
}

async function updatePass() {
    const p = document.getElementById('new-dash-pass').value;
    if(p.length < 6) return alert("Password too short");
    await auth.currentUser.updatePassword(p);
    alert("Dashboard Password Changed!");
}

async function deleteAccount() {
    if(confirm("Are you sure? This will delete your profile and access permanently.")) {
        await db.collection('users').doc(auth.currentUser.uid).delete();
        await auth.currentUser.delete();
        window.location.href = "index.html";
    }
}
</script>
</body>
</html>
